<?xml version="1.0" encoding="UTF-8"?>
<!-- Â© 2016 ClearCorp
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html). -->

<odoo>
    <!-- Adds prepaid_hours_id to invoice configuration in sale.subscription view -->
    <!-- Form -->
    <record id="subscription_view_invoice_form" model="ir.ui.view">
        <field name="name">Invoice Configuration Prepaid Id</field>
        <field name="model">sale.subscription</field>
        <field name="priority" eval="160" />
        <field name="inherit_id"
            ref="project_work_type.subscription_view_invoice_type_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook/page/div/field/tree/field[@name='price']"
                position="after">
                <field name="prepaid_hours_id"/>
            </xpath>
        </field>
    </record>

    <!-- Adds prepaid hours tree to a client's subscription. The tree is
     editable and allows the creation/update/removal of prepaid hours.-->
    <record id="subscription_view_prepaid_hours_form" model="ir.ui.view">
        <field name="name">Prepaid Hours</field>
        <field name="model">sale.subscription</field>
        <field name="priority" eval="160" />
        <field name="inherit_id"
            ref="sale_contract.sale_subscription_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="Prepaid Hours" name="prepaid_hours">
                    <field name="prepaid_hours_id">
                        <tree editable="bottom">
                            <field name="name"/>
                            <field name="quantity"/>
                            <field name="date"/>
                            <field name="active"/>
                        </tree>
                    </field>
                </page>
            </xpath>
       </field>
   </record>
</odoo>
